---
interface Props {
  as?: 'h1' | 'h2' | 'h3' | 'span' | 'p';
  color?: 'green' | 'blue' | 'pink' | 'gradient' | 'cyan' | 'purple';
  animate?: boolean;
  class?: string;
}

const {
  as: Tag = 'span',
  color = 'green',
  animate = true,
  class: className = '',
} = Astro.props;

// Map legacy colors to new cyberpunk colors
const colorMap: Record<string, string> = {
  cyan: 'green',
  purple: 'blue',
};
const mappedColor = colorMap[color] || color;
---

<Tag class:list={['glow', `glow--${mappedColor}`, { 'glow--animate': animate }, className]}>
  <slot />
</Tag>

<style>
  .glow {
    display: inline-block;
  }

  .glow--green {
    color: var(--neon-green);
    text-shadow:
      0 0 10px rgba(57, 255, 20, 0.6),
      0 0 20px rgba(57, 255, 20, 0.4),
      0 0 40px rgba(57, 255, 20, 0.3);
  }

  .glow--blue {
    color: var(--neon-cyan);
    text-shadow:
      0 0 10px rgba(0, 255, 255, 0.6),
      0 0 20px rgba(0, 255, 255, 0.4),
      0 0 40px rgba(0, 255, 255, 0.3);
  }

  .glow--pink {
    color: var(--neon-pink);
    text-shadow:
      0 0 10px rgba(255, 0, 255, 0.6),
      0 0 20px rgba(255, 0, 255, 0.4),
      0 0 40px rgba(255, 0, 255, 0.3);
  }

  .glow--gradient {
    background: var(--gradient-primary);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    filter: drop-shadow(0 0 20px rgba(57, 255, 20, 0.5));
  }

  .glow--animate {
    animation: pulse-glow 2s ease-in-out infinite;
  }

  @keyframes pulse-glow {
    0%, 100% {
      filter: brightness(1);
    }
    50% {
      filter: brightness(1.3);
    }
  }

  .glow--green.glow--animate {
    animation: pulse-glow-green 2s ease-in-out infinite;
  }

  @keyframes pulse-glow-green {
    0%, 100% {
      text-shadow:
        0 0 10px rgba(57, 255, 20, 0.6),
        0 0 20px rgba(57, 255, 20, 0.4),
        0 0 40px rgba(57, 255, 20, 0.3);
    }
    50% {
      text-shadow:
        0 0 20px rgba(57, 255, 20, 1),
        0 0 40px rgba(57, 255, 20, 0.7),
        0 0 80px rgba(57, 255, 20, 0.4);
    }
  }

  .glow--blue.glow--animate {
    animation: pulse-glow-cyan 2s ease-in-out infinite;
  }

  @keyframes pulse-glow-cyan {
    0%, 100% {
      text-shadow:
        0 0 10px rgba(0, 255, 255, 0.6),
        0 0 20px rgba(0, 255, 255, 0.4),
        0 0 40px rgba(0, 255, 255, 0.3);
    }
    50% {
      text-shadow:
        0 0 20px rgba(0, 255, 255, 1),
        0 0 40px rgba(0, 255, 255, 0.7),
        0 0 80px rgba(0, 255, 255, 0.4);
    }
  }
</style>
